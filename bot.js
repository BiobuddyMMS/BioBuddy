const messagesDiv = document.getElementById('messages');
document.getElementById('send-btn').onclick = sendMsg;
document.getElementById('user-input').onkeydown = e => { if (e.key==='Enter') sendMsg(); };

// р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕▒р╕Хр╕зр╣М 24 р╕Кр╕Щр╕┤р╕Ф
const animalData = {'р╕Ыр╕╣р╣Ар╕кр╕Йр╕зр╕Щ': 'ЁЯжА р╕кр╕▒р╕Хр╕зр╣Мр╣Др╕бр╣Ир╕бр╕╡р╕Бр╕гр╕░р╕Фр╕╣р╕Бр╕кр╕▒р╕Щр╕лр╕ер╕▒р╕З р╣Гр╕Кр╣Йр╣Ар╕Ыр╕ер╕╖р╕нр╕Бр╕лр╕нр╕вр╣Ар╕Ыр╣Зр╕Щр╕Ър╣Йр╕▓р╕Щ р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Arthropoda', 'р╣Бр╕бр╕Зр╕Бр╕░р╕Юр╕гр╕╕р╕Щ': 'ЁЯМК р╕ер╕│р╕Хр╕▒р╕зр╕зр╕╕р╣Йр╕Щр╣Гр╕к р╣Др╕бр╣Ир╕бр╕╡р╕кр╕бр╕нр╕З р╕бр╕╡р╣Ар╕Вр╣Зр╕бр╕Юр╕┤р╕йр╕Щр╕┤р╕Ф р╣Ж р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Cnidaria', 'р╣Бр╕бр╕Зр╕Фр╕▓р╕Чр╕░р╣Ар╕е': 'ЁЯЫбя╕П р╕лр╕Щр╣Йр╕▓р╣Ар╕лр╕бр╕╖р╕нр╕Щр╕лр╕бр╕зр╕Бр╕Щр╕▒р╕Бр╕гр╕Ър╕Фр╕╢р╕Бр╕Фр╕│р╕Ър╕гр╕гр╕Юр╣М р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Arthropoda', 'р╕Ыр╕ер╕▓р╕Фр╕▓р╕з': 'тнР р╣Бр╕Вр╕Щр╣Бр╕Йр╕Б р╣Ж р╕Зр╕нр╕Бр╣Гр╕лр╕бр╣Ир╣Др╕Фр╣Й р╕кр╕▒р╕Хр╕зр╣Мр╕Чр╕░р╣Ар╕ер╣Др╕бр╣Ир╕бр╕╡р╕Бр╕гр╕░р╕Фр╕╣р╕Бр╕кр╕▒р╕Щр╕лр╕ер╕▒р╕З р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Echinodermata', 'р╣Ар╕Юр╕Щр╕Бр╕зр╕┤р╕Щ': 'ЁЯРз р╕Щр╕Бр╕Чр╕╡р╣Ир╕Ър╕┤р╕Щр╣Др╕бр╣Ир╣Др╕Фр╣Й р╣Бр╕Хр╣Ир╕зр╣Ир╕▓р╕вр╕Щр╣Йр╕│р╣Вр╕лр╕Ф р╕нр╕вр╕╣р╣Ир╣Бр╕Цр╕Ър╕лр╕Щр╕▓р╕з р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Chordata', 'р╣Вр╕ер╕бр╕▓': 'ЁЯРм р╕Йр╕ер╕▓р╕Ф р╕Вр╕╡р╣Йр╣Ар╕ер╣Ир╕Щ р╕лр╕▓р╕вр╣Гр╕Ир╕Фр╣Йр╕зр╕вр╕Ыр╕нр╕Ф р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Chordata', 'р╕Йр╕ер╕▓р╕б': 'ЁЯжИ р╕Бр╕гр╕░р╕Фр╕╣р╕Бр╣Ар╕Ыр╣Зр╕Щр╕Бр╕гр╕░р╕Фр╕╣р╕Бр╕нр╣Ир╕нр╕Щ р╕ер╣Ир╕▓р╣Ар╕Бр╣Ир╕З р╕Хр╕▒р╕зр╣Гр╕лр╕Нр╣И р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Chordata', 'р╣Ар╕Хр╣Ир╕▓р╕Чр╕░р╣Ар╕е': 'ЁЯРв р╕Бр╕гр╕░р╕Фр╕нр╕Зр╣Бр╕Вр╣Зр╕З р╕зр╣Ир╕▓р╕вр╕Щр╣Йр╕│р╣Ар╕Бр╣Ир╕З р╕Щр╕▓р╕Щ р╣Ж р╕Вр╕╢р╣Йр╕Щр╕бр╕▓р╕лр╕▓р╕вр╣Гр╕Ир╕Чр╕╡ р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Chordata', 'р╕бр╣Йр╕▓р╕Щр╣Йр╕│': 'ЁЯРЙ р╕Хр╕▒р╕зр╕Хр╕гр╕З р╣Ж р╕лр╕▓р╕Зр╕бр╣Йр╕зр╕Щр╣Др╕Фр╣Й р╕Хр╕▒р╕зр╕Ьр╕╣р╣Йр╣Ар╕ер╕╡р╣Йр╕вр╕Зр╕ер╕╣р╕Б р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Chordata', 'р╕лр╕бр╕╢р╕Бр╕Бр╕гр╕░р╕Фр╕нр╕З': 'ЁЯжС р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕кр╕╡р╣Др╕Фр╣Й р╕бр╕╡р╕лр╕бр╕╢р╕Бр╣Гр╕Щр╕Хр╕▒р╕з р╕Йр╕ер╕▓р╕Фр╣Ар╕зр╕нр╕гр╣М р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Mollusca', 'р╕Бр╕╕р╣Йр╕Зр╕бр╕▒р╕Зр╕Бр╕г': 'ЁЯжЮ р╣Ар╕Ыр╕ер╕╖р╕нр╕Бр╣Бр╕Вр╣Зр╕З р╣Ж р╕лр╕Щр╕зр╕Фр╕вр╕▓р╕з р╣Ж р╕Бр╣Йр╕▓р╕бр╣Гр╕лр╕Нр╣И р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Arthropoda', 'р╕лр╕нр╕вр╕Щр╕▓р╕Зр╕гр╕б': 'ЁЯжк р╣Ар╕Ыр╕ер╕╖р╕нр╕Бр╕лр╕┤р╕Щ р╣Ж р╕Бр╕гр╕нр╕Зр╕Щр╣Йр╕│р╕лр╕▓р╕Бр╕┤р╕Щ р╣Др╕бр╣Ир╕Вр╕вр╕▒р╕Ър╕Хр╕▒р╕з р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Mollusca', 'р╕Ыр╕ер╕┤р╕Зр╕Чр╕░р╣Ар╕е': 'ЁЯеТ р╕Хр╕▒р╕зр╕Щр╕┤р╣Ир╕б р╣Ж р╕вр╕▓р╕з р╣Ж р╕Фр╕╡р╕Фр╕Юр╕ер╕▒р╕Зр╕Юр╕┤р╣Ар╕ир╕йр╣Др╕Фр╣Й р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Echinodermata', 'р╕лр╕бр╕╢р╕Бр╕вр╕▒р╕Бр╕йр╣М': 'ЁЯРЩ р╣Бр╕Вр╕Щ 8 р╣Ар╕кр╣Йр╕Щ р╕Йр╕ер╕▓р╕Фр╕гр╕░р╕Фр╕▒р╕Ър╣Ар╕Чр╕Ю р╕бр╕╡р╕лр╕▒р╕зр╣Гр╕И 3 р╕Фр╕зр╕З р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Mollusca', 'р╕Ыр╕░р╕Бр╕▓р╕гр╕▒р╕З': 'ЁЯк╕ р╣Ар╕лр╕бр╕╖р╕нр╕Щр╕лр╕┤р╕Щ р╣Бр╕Хр╣Ир╕Ир╕гр╕┤р╕З р╣Ж р╣Ар╕Ыр╣Зр╕Щр╕кр╕▒р╕Хр╕зр╣М! р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕Щр╕зр╕Ыр╕░р╕Бр╕▓р╕гр╕▒р╕З р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Cnidaria', 'р╕Яр╕нр╕Зр╕Щр╣Йр╕│р╕Чр╕░р╣Ар╕е': 'ЁЯз╜ р╕Фр╕╣р╣Ар╕лр╕бр╕╖р╕нр╕Щр╕Юр╕╖р╕Кр╣Бр╕Хр╣Ир╣Ар╕Ыр╣Зр╕Щр╕кр╕▒р╕Хр╕зр╣М! р╣Др╕бр╣Ир╕бр╕╡р╕кр╕бр╕нр╕З р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Porifera', 'р╕лр╕нр╕вр╕бр╕╖р╕нр╣Ар╕кр╕╖р╕н': 'ЁЯЯг р╕лр╕нр╕вр╕вр╕▒р╕Бр╕йр╣М р╕Ыр╕▓р╕Бр╣Ар╕Ыр╣Зр╕Щр╕Яр╕▒р╕Щ р╣Ж р╕кр╕╡р╕Ир╕╡р╣Кр╕Фр╕Ир╣Кр╕▓р╕Ф р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Mollusca', 'р╕Ыр╕╣р╕бр╣Йр╕▓': 'ЁЯжА р╕зр╕┤р╣Ир╕Зр╣Др╕з р╕кр╕╡р╕Яр╣Йр╕▓р╕кр╕Фр╣Гр╕к р╕Бр╣Йр╕▓р╕бр╣Бр╕лр╕ер╕б р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Arthropoda', 'р╕Ыр╕ер╕▓р╕Бр╕▓р╕гр╣Мр╕Хр╕╣р╕Щ': 'ЁЯРа р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╕Фр╕нр╕Бр╣Др╕бр╣Йр╕Чр╕░р╣Ар╕е р╕Вр╕╡р╣Йр╕нр╕▓р╕вр╣Бр╕Хр╣Ир╣Ар╕Бр╣Ир╕З р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Chordata', 'р╕Бр╕▒р╣Йр╕Зр╕Бр╕гр╕░р╕Фр╕▓р╕Щ': 'ЁЯЫ╖ р╕лр╕Щр╣Йр╕▓р╕Др╕ер╣Йр╕▓р╕вр╣Др╕бр╣Йр╕Бр╕гр╕░р╕Фр╕▓р╕Щ р╕зр╕┤р╣Ир╕Зр╣Др╕з р╕Хр╕▒р╕зр╣Ар╕ер╣Зр╕Бр╣Бр╕Хр╣Ир╕Щр╕▒р╕Бр╕ер╣Ир╕▓! р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Arthropoda', 'р╣Бр╕бр╕Зр╕Бр╕░р╕Юр╕гр╕╕р╕Щр╕Бр╕ер╣Ир╕нр╕З': 'ЁЯУж р╕Юр╕┤р╕йр╣Бр╕гр╕Зр╕бр╕▓р╕Б р╕ер╣Ир╕нр╕Зр╕ер╕нр╕вр╣Ар╕Ър╕▓ р╣Ж р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Cnidaria', 'р╣Ар╕Хр╣Ир╕▓р╕лр╕Нр╣Йр╕▓': 'ЁЯРв р╣Ар╕Хр╣Ир╕▓р╕Чр╕░р╣Ар╕ер╕Чр╕╡р╣Ир╕Кр╕нр╕Ър╕Бр╕┤р╕Щр╕лр╕Нр╣Йр╕▓р╕Чр╕░р╣Ар╕е р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Chordata', 'р╕Ыр╕ер╕▓р╕кр╕┤р╕Зр╣Вр╕Х': 'ЁЯжБ р╕бр╕╡р╕лр╕Щр╕▓р╕бр╣Бр╕лр╕ер╕б р╕Юр╕┤р╕йр╣Бр╕гр╕З р╕ер╕▓р╕вр╣Ар╕Чр╣И р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Chordata', 'р╕лр╕бр╕╢р╕Бр╕Бр╕ер╣Йр╕зр╕в': 'ЁЯжС р╕Хр╕▒р╕зр╣Ар╕Юр╕гр╕╡р╕вр╕зр╕Бр╕зр╣Ир╕▓р╣Ар╕Юр╕╖р╣Ир╕нр╕Щ р╕вр╕┤р╕Зр╕лр╕бр╕╢р╕Бр╣Гр╕кр╣Ир╕ир╕▒р╕Хр╕гр╕╣ р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╕▒р╕б Mollusca'};

function sendMsg(){
  const txt = document.getElementById('user-input').value.trim();
  if(!txt) return;
  append('user', txt);
  document.getElementById('user-input').value = '';

  setTimeout(() => {
    const resp = getBotReply(txt);
    append('bot', resp);
  }, 500);
}

function append(who, txt){
  const div = document.createElement('div');
  div.className = 'message ' + who;
  div.textContent = who==='user' ? `р╕Др╕╕р╕У: ${txt}` : `BioBuddy: ${txt}`;
  messagesDiv.appendChild(div);
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

function getBotReply(input){
  input = input.toLowerCase();
  if(input.includes('р╕Бр╕Хр╕┤р╕Бр╕▓')) return 'ЁЯУЬ р╕Бр╕Хр╕┤р╕Бр╕▓р╣Ар╕Бр╕б: р╣Бр╕Ър╣Ир╕Зр╕кр╕нр╕Зр╕Чр╕╡р╕б р╕Чр╕нр╕вр╕ер╕╣р╕Бр╣Ар╕Хр╣Лр╕▓ р╕Цр╕▓р╕бр╕Др╕│р╕Цр╕▓р╕бр╣Гр╕Кр╣И/р╣Др╕бр╣Ир╣Гр╕Кр╣И р╣Бр╕ер╣Йр╕зр╣Ар╕Фр╕▓р╕кр╕▒р╕Хр╕зр╣М!';
  if(input.includes('р╕Чр╕нр╕вр╕ер╕╣р╕Бр╣Ар╕Хр╣Лр╕▓')) {
    const red = Math.floor(Math.random() * 6) + 1;
    const blue = Math.floor(Math.random() * 6) + 1;
    let msg = `ЁЯФ┤ р╕Чр╕╡р╕бр╣Бр╕Фр╕Зр╣Др╕Фр╣Й ${red} ЁЯО▓\nЁЯФ╡ р╕Чр╕╡р╕бр╕Щр╣Йр╕│р╣Ар╕Зр╕┤р╕Щр╣Др╕Фр╣Й ${blue} ЁЯО▓\n`;
    if (red > blue) msg += "р╕Чр╕╡р╕бр╣Бр╕Фр╕Зр╣Ар╕гр╕┤р╣Ир╕бр╕Бр╣Ир╕нр╕Щ!";
    else if (blue > red) msg += "р╕Чр╕╡р╕бр╕Щр╣Йр╕│р╣Ар╕Зр╕┤р╕Щр╣Ар╕гр╕┤р╣Ир╕бр╕Бр╣Ир╕нр╕Щ!";
    else msg += "р╣Ар╕кр╕бр╕н! р╕Хр╣Йр╕нр╕Зр╕Чр╕нр╕вр╣Гр╕лр╕бр╣Ир╕Ир╣Йр╕▓ ЁЯО▓";
    return msg;
  }
  if(input.startsWith('р╕Вр╣Йр╕нр╕бр╕╣р╕е')) {
    const name = input.split(' ').slice(1).join(' ').trim();
    return animalData[name] || `р╕Вр╕нр╣Вр╕Чр╕йр╕Щр╣Йр╕▓ р╣Др╕бр╣Ир╕Юр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Вр╕нр╕З "${name}" р╣Гр╕Щр╕гр╕░р╕Ър╕Ър╕Ир╣Йр╕▓ ЁЯШЕ`;
  }
  if(input.includes('р╕Кр╣Ир╕зр╕вр╕Др╕┤р╕Фр╕Др╕│р╕Цр╕▓р╕б')) return 'ЁЯдФ р╕ер╕нр╕Зр╕Цр╕▓р╕бр╕зр╣Ир╕▓: тАЬр╕кр╕▒р╕Хр╕зр╣Мр╕Хр╕▒р╕зр╕Щр╕╡р╣Йр╕бр╕╡р╕Бр╕гр╕░р╕Фр╕╣р╕Бр╕кр╕▒р╕Щр╕лр╕ер╕▒р╕Зр╣Др╕лр╕б?тАЭ р╕лр╕гр╕╖р╕н тАЬр╕нр╕вр╕╣р╣Ир╣Гр╕Щр╕Щр╣Йр╕│р╣Гр╕Кр╣Ир╣Др╕лр╕б?тАЭ';
  if(input.includes('р╕Чр╕▓р╕вр╕зр╣Ир╕▓')) return 'ЁЯзР р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕Ър╕нр╕Бр╕зр╣Ир╕▓р╣Гр╕Кр╣Ир╕лр╕гр╕╖р╕нр╣Др╕бр╣И р╕ер╕нр╕Зр╕Хр╕▒р╕Фр╕Хр╕▒р╕зр╣Ар╕ер╕╖р╕нр╕Бр╕Бр╣Ир╕нр╕Щр╕Щр╣Йр╕▓!';
  return 'ЁЯШЛ р╕Ьр╕бр╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Щр╕╡р╣Й р╕ер╕нр╕З тАЬр╕Бр╕Хр╕┤р╕Бр╕▓тАЭ, тАЬр╕Вр╣Йр╕нр╕бр╕╣р╕е р╕Ыр╕╣р╣Ар╕кр╕Йр╕зр╕ЩтАЭ, р╕лр╕гр╕╖р╕н тАЬр╕Кр╣Ир╕зр╕вр╕Др╕┤р╕Фр╕Др╕│р╕Цр╕▓р╕бтАЭ р╕Фр╕╣р╕Щр╕░!';
}
